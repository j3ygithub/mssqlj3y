{% extends 'mail_job/base.html' %}
{% load i18n %}
{% load static %}
{% load widget_tweaks %}

{% block extracss %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row" style="height: 4rem"></div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <div class="text-center">
                <p>
                    <svg class="bi bi-bell" width="8rem" height="8rem" viewBox="0 0 16 16" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2z" />
                        <path fill-rule="evenodd"
                            d="M8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z" />
                    </svg>
                </p>
                <h1>{% trans 'Reminder' %}</h1>
                <p class="text-secondary">{% trans 'For those you may miss.' %}</p>
            </div>
        </div>
    </div>
    <div class="row" style="height: 4rem"></div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <div class="text-right px-1 py-2 d-flex">
                <input type="text" style="max-width: 18rem;" class="form-control mx-1 mr-auto" id="filter-mail-job"
                    placeholder="{% trans 'Search..' %}">
                <select style="max-width: 8rem;" class="form-control mx-1" id="show-all-controller-mail-job">
                    <option value="personal">{% trans 'Personal' %}</option>
                    <option value="all">{% trans 'All' %}</option>
                </select>
                <select style="max-width: 10rem;" class="form-control mx-1" id="field-controller-mail-job">
                    <option value="basic_field">{% trans 'Basic fields' %}</option>
                    <option value="all_field">{% trans 'All fields' %}</option>
                </select>
                <a class="btn btn-secondary rounded mx-1" style="width: 6rem;"
                    href="{% url 'mail_job:add' %}">{% trans 'Add' %} +</a>
            </div>
            <table class="table table-bordered border-light table-hover table-responsive mail-job" id="table-mail-job">
                <thead>
                    <tr>
                        <th>{% trans 'Action' %}</th>
                        <th class="advanced-field">{% trans 'Dep.' %}</th>
                        <th>{% trans 'Event type' %}</th>
                        <th>{% trans 'Event' %}</th>
                        <th>{% trans 'Start date' %}</th>
                        <th class="advanced-field">{% trans 'Stop date' %}</th>
                        <th>{% trans 'Period' %}</th>
                        <th>{% trans 'Mail subject' %}</th>
                        <th>{% trans 'Mail content' %}</th>
                        <th>{% trans 'Recipients' %}</th>
                        <th>{% trans 'Created by' %}</th>
                        <th>{% trans 'Created date' %}</th>
                        <th class="advanced-field">{% trans 'Updated by' %}</th>
                        <th class="advanced-field">{% trans 'Updated date' %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in df.iterrows %}
                    <tr>
                        <td id='td-action-mail-job'>
                            <div class="dropdown show">
                                <button class="btn btn-light bg-light dropdown-toggle" href="#" role="button"
                                    id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false">
                                    {% trans 'Choose' %}
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                    <a class="dropdown-item"
                                        href="{% url 'mail_job:change' seq=row.seq %}">{% trans 'Change' %}</a>
                                    <a class="dropdown-item"
                                        href="{% url 'mail_job:delete' seq=row.seq %}">{% trans 'Delete' %}</a>
                                    <a class="dropdown-item"
                                        href="{% url 'mail_job:mail_test' seq=row.seq %}">{% trans 'Mail test' %}</a>
                                </div>
                            </div>
                        </td>
                        <td class="advanced-field">{{ row.department }}</td>
                        <td>{{ row.event_type }}</td>
                        <td>{{ row.event }}</td>
                        <td>{{ row.start_date|date:"Y-m-d" }}</td>
                        <td class="advanced-field">{{ row.stop_date|date:"Y-m-d" }}</td>
                        <td>{{ row.period_readable }}</td>
                        <td>{{ row.mail_subject }}</td>
                        <td>{{ row.mail_content }}</td>
                        <td>{{ row.recipients }}</td>
                        <td id="field-created-by-mail-job">{{ row.created_by }}</td>
                        <td>{{ row.created_date|date:"Y-m-d" }} {{ row.created_date|time:"H:i:s" }}</td>
                        <td class="advanced-field">{{ row.updated_by }}</th>
                        <td class="advanced-field">{{ row.updated_date|date:"Y-m-d" }}
                            {{ row.updated_date|time:"H:i:s" }}</th>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" style="height: 8rem"></div>
</div>
{% endblock %}

{% block extrajs %}
<script type="text/javascript" src="{% static 'js/mail_job/change_list.js' %}"></script>
{% endblock %}